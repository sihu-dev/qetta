# 유량계 AI 접목 기획 자료

> **생성일**: 2025-12-21
> **대상**: CMNTech (씨엠엔텍) 유량계 제품군
> **목적**: 입찰 자동화 시스템에 AI 기반 제품 매칭 및 서류 생성 기능 통합

---

## 1. 제품 라인업 (CMNTech 5종)

### 1.1 제품 사양 요약

| 제품 | 용도 | 파이프 규격 | 정확도 | 적용 분야 |
|------|------|-------------|--------|-----------|
| **UR-1000PLUS** | 만관형 다회선 초음파 | DN 100~4000 | ±0.5% | 상수도, 취수장, 정수장 |
| **MF-1000C** | 일체형 전자유량계 | DN 15~2000 | ±0.5% | 공업용수, 상거래, 농업용수 |
| **UR-1010PLUS** | 비만관형 초음파 | DN 200~3000 | ±1~2% | 하수관로, 우수관로 |
| **SL-3000PLUS** | 개수로 유량계 | 무제한 | ±3~5% | 하천, 농업용수로 |
| **EnerRay** | 초음파 열량계 | DN 15~300 | Class 2 | 지역난방, 냉난방 |

### 1.2 제품별 타겟 기관

```yaml
UR-1000PLUS:
  - 한국수자원공사
  - 지자체 상수도사업본부
  - 환경부 수질측정망

MF-1000C:
  - 지자체
  - 산업단지 관리공단
  - 한국농어촌공사

UR-1010PLUS:
  - 환경부
  - 하수도사업소
  - 한국환경공단

SL-3000PLUS:
  - 환경부 하천관리
  - 농림부
  - 한국농어촌공사

EnerRay:
  - 한국지역난방공사
  - 열병합발전
  - 에너지공단
```

---

## 2. AI 기능 설계

### 2.1 스프레드시트 AI 함수

BIDFLOW는 구글시트형 스프레드시트 UI에서 셀 내 AI 함수를 지원합니다.

| 함수 | 문법 | 설명 | 출력 예시 |
|------|------|------|----------|
| `AI_SUMMARY` | `=AI_SUMMARY()` | 공고 2-3문장 요약 | "서울시 상수도사업본부 초음파유량계 구매 입찰" |
| `AI_SCORE` | `=AI_SCORE()` | 낙찰 가능성 0-100% | 92 |
| `AI_MATCH` | `=AI_MATCH()` | 최적 제품 추천 | UR-1000PLUS |
| `AI_KEYWORDS` | `=AI_KEYWORDS()` | 핵심 키워드 3개 | 초음파, 상수도, 유량계 |
| `AI_DEADLINE` | `=AI_DEADLINE()` | 마감일 분석 | D-7 - 검토 완료 권장 |

### 2.2 확장 AI 함수 (향후)

| 함수 | 설명 |
|------|------|
| `AI_RISK` | 입찰 리스크 분석 (경쟁사, 가격 등) |
| `AI_PROPOSAL` | 제안서 초안 자동 생성 |
| `AI_PRICE` | 적정 입찰가 추천 |
| `AI_COMPARE` | 경쟁 제품 대비 분석 |

---

## 3. AI 매칭 알고리즘 (175점 만점)

### 3.1 점수 계산 구조

```
총점 = 키워드 점수 (최대 100점)
     + 파이프 규격 점수 (최대 25점)
     + 발주기관 점수 (최대 50점)
```

### 3.2 키워드 매칭

```typescript
// 강한 키워드: 10점/개
strongKeywords: ['초음파유량계', '다회선', '상수도', '정수장']

// 약한 키워드: 3점/개
weakKeywords: ['유량계', '계측기', '측정기']

// 제외 키워드: 매칭 불가 (즉시 0점)
excludeKeywords: ['전자유량계', '비만관', '열량계']
```

### 3.3 파이프 규격 매칭

| 조건 | 점수 |
|------|------|
| DN 범위 완전 일치 | +25점 |
| DN 범위 부분 일치 | +15점 |
| DN 범위 불일치 | -10점 |
| 규격 정보 없음 | +10점 |

### 3.4 발주기관 매칭

| 기관 유형 | 점수 |
|-----------|------|
| 직접 타겟 기관 (수자원공사 등) | +50점 |
| 관련 기관 (지자체 상수도) | +30점 |
| 유사 기관 | +15점 |
| 무관 기관 | 0점 |

### 3.5 신뢰도 등급

```typescript
if (score >= 50 && strongKeywords >= 1) → 'HIGH' (입찰 참여 권장)
if (score >= 30) → 'MEDIUM' (검토 필요)
if (score >= 15) → 'LOW' (참고용)
else → 'NONE' (건너뛰기)
```

### 3.6 추천 전략

| 신뢰도 | 점수 | 추천 |
|--------|------|------|
| HIGH | 60점 이상 | `BID` - 적극 참여 |
| MEDIUM | 30점 이상 | `REVIEW` - 검토 후 결정 |
| LOW/NONE | 30점 미만 | `SKIP` - 건너뛰기 |

---

## 4. AI 매칭 예시

### 샘플 공고 분석

```yaml
공고: "서울시 상수도사업본부 초음파유량계 구매 (DN500 20대)"
기관: 서울특별시 상수도사업본부
예정가: 4.5억원

매칭 결과:
  1위: UR-1000PLUS (다회선 초음파 유량계)
       점수: 85/175 (HIGH)
       이유:
         - 강한 키워드 3개: 초음파유량계, 상수도
         - 규격 매칭: DN500 (300~4000 범위)
         - 타겟 기관: 상수도사업본부
       추천: BID (입찰 참여)

  2위: MF-1000C (전자 유량계)
       점수: 0 (NONE)
       이유: 제외 키워드 '초음파' 발견
```

---

## 5. AI 프롬프트 템플릿

### 5.1 제품 매칭 프롬프트

```
입찰 공고를 분석하고 가장 적합한 제품을 추천해 주세요.

## 입찰 정보
- 제목: {title}
- 발주처: {organization}
- 요구사항: {requirements}
- 사양: {specifications}

## CMNTech 제품 라인업
1. UR-1000PLUS: 만관형 다회선 초음파 유량계 (DN100-4000, ±0.5%)
2. MF-1000C: 일체형 전자유량계 (DN15-2000, 상거래용)
3. UR-1010PLUS: 비만관형 초음파 유량계 (하수/우수 전용)
4. SL-3000PLUS: 개수로 유량계 (하천/수로)
5. EnerRay: 초음파 열량계 (지역난방/냉난방)

## 응답 형식 (JSON)
{
  "recommended": "제품ID",
  "score": 0-100,
  "reasons": ["추천 이유"],
  "requirementsMatch": ["충족 요건"],
  "requirementsGap": ["미충족 요건"]
}
```

### 5.2 제안서 생성 프롬프트

```
다음 입찰 공고에 대한 제안서 초안을 작성해 주세요.

## 공고 정보
{bid_info}

## 추천 제품
{product_name}

## 제품 강점
{product_selling_points}

## 생성 요청
1. 기술 제안 (2페이지)
2. 가격 제안 (1페이지)
3. 납품 일정 (1페이지)
4. 사후 지원 (1페이지)
```

---

## 6. 제품별 셀링 포인트

### UR-1000PLUS

```yaml
헤드라인: "국내 최고 정확도 다회선 초음파 유량계"

핵심 강점:
  - ±0.5% 고정밀 측정 (유량계수 불필요)
  - 25년간 1.5만대 이상 설치 실적
  - 곡관부/밸브 후류에서도 정확한 측정
  - 다회선 측정으로 유속 분포 자동 보정

레퍼런스:
  - 한국수자원공사 전국 취수장
  - 서울시 상수도사업본부
  - 환경부 수질측정망
```

### MF-1000C

```yaml
헤드라인: "고정밀 상거래용 전자유량계"

핵심 강점:
  - ±0.5% 정확도 (검정 인증)
  - 일체형 구조로 간편 설치
  - 다양한 통신 (4-20mA, RS485, HART)
  - 내구성 우수한 라이닝 선택

레퍼런스:
  - 전국 지자체 상수도
  - 산업단지 용수 계량
  - 농어촌공사 농업용수
```

---

## 7. 가격 경쟁력

| 제품 | 당사 예상가 | 시장 평균 | 경쟁력 |
|------|-------------|-----------|--------|
| UR-1000PLUS (DN300) | ₩15-20M | ₩18-25M | ✅ 우수 |
| MF-1000C (DN100) | ₩2-3M | ₩2.5-4M | ✅ 우수 |
| UR-1010PLUS (DN500) | ₩12-18M | ₩15-22M | ✅ 우수 |
| SL-3000PLUS | ₩20-30M | ₩25-35M | ✅ 우수 |
| EnerRay (DN50) | ₩3-5M | ₩4-6M | ⚠️ 보통 |

---

## 8. 데이터 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│                     BIDFLOW AI 매칭 파이프라인                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌───────────┐    ┌───────────────┐    ┌──────────────┐        │
│   │  입찰 수집  │ → │  텍스트 분석   │ → │  키워드 추출  │        │
│   │ TED/G2B   │    │  NLP 처리     │    │  규격 파싱   │        │
│   └───────────┘    └───────────────┘    └──────────────┘        │
│                                                ↓                 │
│   ┌───────────────────────────────────────────────────────┐     │
│   │                Enhanced Matcher (175점)                │     │
│   │  ┌─────────┐  ┌─────────────┐  ┌────────────────┐     │     │
│   │  │키워드 100│ + │파이프 규격 25│ + │ 발주기관 50  │     │     │
│   │  └─────────┘  └─────────────┘  └────────────────┘     │     │
│   └───────────────────────────────────────────────────────┘     │
│                                                ↓                 │
│   ┌───────────────────────────────────────────────────────┐     │
│   │              추천 전략 결정                            │     │
│   │       HIGH → BID | MEDIUM → REVIEW | LOW → SKIP       │     │
│   └───────────────────────────────────────────────────────┘     │
│                                                ↓                 │
│   ┌───────────────────────────────────────────────────────┐     │
│   │           스프레드시트 UI 표시                         │     │
│   │     =AI_MATCH() → UR-1000PLUS (92%)                   │     │
│   │     =AI_SCORE() → 85                                  │     │
│   └───────────────────────────────────────────────────────┘     │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 9. 구현 현황

### 완료 (✅)

| 항목 | 파일 | 상태 |
|------|------|------|
| 제품 카탈로그 정의 | `enhanced-matcher.ts` | ✅ |
| 키워드 매칭 로직 | `enhanced-matcher.ts` | ✅ |
| 파이프 규격 파서 | `pipe-size-extractor.ts` | ✅ |
| 기관 사전 | `organization-dictionary.ts` | ✅ |
| AI 함수 정의 | `ai-functions.ts` | ✅ |
| 스프레드시트 데모 | `SpreadsheetDemo.tsx` | ✅ |

### 진행중 (🚧)

| 항목 | 설명 |
|------|------|
| Claude API 연동 | AI 요약/제안서 생성 |
| 실시간 공고 수집 | TED/G2B/SAM.gov 크롤링 |
| 알림 발송 | 카카오톡/이메일 |

---

## 10. 다음 단계

### Phase 1: AI 함수 실제 구현

```typescript
// 현재: 데모 데이터 반환
export function AI_MATCH(bidId: string): string {
  return demoData[bidId].match; // 하드코딩
}

// 목표: 실시간 AI 분석
export async function AI_MATCH(bidId: string): Promise<string> {
  const bid = await getBid(bidId);
  const result = await matchBidToProducts(bid);
  return result.bestMatch?.productId ?? 'NONE';
}
```

### Phase 2: 제안서 자동 생성

1. 공고 분석 → 요구사양 추출
2. 제품 매칭 → 셀링 포인트 선택
3. 템플릿 결합 → 초안 생성
4. 사용자 검토 → 최종 제출

### Phase 3: 학습 및 개선

- 낙찰 결과 피드백
- 매칭 가중치 자동 조정
- 신규 키워드 자동 발견

---

## 부록 A: 코드 참조

| 파일 | 경로 | 역할 |
|------|------|------|
| `enhanced-matcher.ts` | `src/lib/matching/` | 175점 매칭 엔진 |
| `product-matcher.ts` | `src/lib/clients/` | 기본 매칭 로직 |
| `ai-functions.ts` | `src/lib/data/` | AI 함수 정의 |
| `pipe-size-extractor.ts` | `src/lib/matching/` | DN 규격 파싱 |
| `organization-dictionary.ts` | `src/lib/matching/` | 기관 사전 |

---

*Generated by Claude Opus 4.5*
*Version: 1.0*
*BIDFLOW 입찰 자동화 시스템*
