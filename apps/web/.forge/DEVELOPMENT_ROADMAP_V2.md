# BIDFLOW 개발 로드맵 V2

> **작성일**: 2025-12-21
> **분석 기반**: 7개 에이전트 병렬 분석 결과
> **현재 버전**: V0.1.0

---

## 1. 프로젝트 현황 요약

### 1.1 달성도

| 영역 | 달성률 | 상태 |
|------|--------|------|
| 인프라 | 100% | ✅ Supabase + Upstash 설정 완료 |
| 보안 | 95% | ✅ Auth, CSRF, Rate Limit, Prompt Guard |
| API | 70% | 🟡 CRUD 완료, 크롤링/알림 로직 부분 |
| UI/UX | 65% | 🟡 스프레드시트 기본, 필터/정렬 미완 |
| AI 기능 | 60% | 🟡 기본 함수 작동, 고급 함수 부분 |
| 데이터 소스 | 40% | 🔴 클라이언트만, 크롤링 미완 |
| 테스트 | 50% | 🟡 E2E 46개 준비, 단위 테스트 부분 |

### 1.2 번들 성능

```
총 청크: 90개, 4.4MB (미압축)
공유 JS: 103KB (gzip)
First Load: 111-144KB

대형 청크:
- Handsontable: 1.6MB → 동적 임포트 ✅
- HyperFormula: 912KB → 별도 청크 분리 ✅
- Radix UI: 172KB → 트리쉐이킹 적용 ✅
```

---

## 2. TODO 항목 정리 (우선순위순)

### P0: 즉시 해결 (이번 주)

| # | 항목 | 파일 | 예상 시간 |
|---|------|------|----------|
| 1 | Dashboard Bid 수정 API 연결 | `dashboard/page.tsx:387` | 2h |
| 2 | Dashboard 새로고침 API 연결 | `dashboard/page.tsx:390` | 1h |
| 3 | 알림 발송 구현 | `crawl-scheduler.ts:103, 202` | 4h |
| 4 | 키워드 필터링 구현 | `crawl-scheduler.ts:131` | 2h |

### P1: 이번 스프린트 (다음 주)

| # | 항목 | 파일 | 예상 시간 |
|---|------|------|----------|
| 5 | 카카오 알림톡 연동 | `notifications/index.ts:62` | 4h |
| 6 | Contact API 실제 구현 | `contact/route.ts:36` | 2h |
| 7 | 상태 변경 이력 기록 | `bid-usecases.ts:98` | 2h |

### P2: 백로그

| # | 항목 | 파일 |
|---|------|------|
| 8 | SpreadsheetView onBidCreate 연결 | `SpreadsheetView.tsx:297` |

---

## 3. 개발 우선순위 (Phase 4)

### Phase 4.1: 대시보드 완성 (D-Day ~ D+3)

```
목표: 사용자가 실제로 입찰 관리할 수 있는 MVP

작업:
1. Dashboard API 연결 (CRUD)
   - handleBidUpdate → PATCH /api/v1/bids/[id]
   - handleRefresh → GET /api/v1/bids

2. 스프레드시트 필터/정렬 완성
   - Handsontable 플러그인 연동
   - 컬럼별 필터 UI

3. 사이드패널 상세 정보
   - AI 요약 표시
   - 매칭 점수 시각화
```

### Phase 4.2: 크롤링 자동화 (D+4 ~ D+7)

```
목표: 나라장터/TED 자동 수집

작업:
1. Inngest 크롤링 함수 완성
   - 일일 스케줄링 (cron: 0 9 * * *)
   - 신규 공고 감지 → DB 저장

2. 키워드 필터링
   - 사용자 설정 키워드 매칭
   - 불필요 공고 제외

3. 알림 발송
   - 신규 공고 알림
   - 마감 임박 알림 (D-3, D-1)
```

### Phase 4.3: AI 기능 강화 (D+8 ~ D+14)

```
목표: AI 셀 함수 실제 동작

작업:
1. AI_SUMMARY 캐싱 구현
   - Redis 캐싱 (1시간)
   - 중복 호출 방지

2. AI_EXTRACT 구현
   - PDF/문서에서 필드 추출
   - Claude Vision API 연동

3. AI_PROPOSAL 개선
   - 템플릿 기반 제안서 생성
   - 다운로드 기능
```

### Phase 4.4: 알림 시스템 (D+15 ~ D+21)

```
목표: 다채널 알림

작업:
1. 카카오 알림톡 연동
   - 비즈니스 채널 설정
   - 템플릿 메시지

2. 이메일 알림
   - Resend/SendGrid 연동
   - HTML 템플릿

3. Slack 웹훅
   - 팀 알림 채널
   - 멘션 기능
```

---

## 4. 성능 개선 로드맵

### 즉시 적용 가능

| 항목 | 현재 | 개선 후 | 작업 |
|------|------|---------|------|
| HyperFormula | 912KB 포함 | 별도 청크 | ✅ 완료 |
| API 캐싱 | 없음 | 1분 캐시 | Cache-Control 헤더 |
| prefetch | 모든 Link | 선택적 | `prefetch={false}` |

### 중기 개선

| 항목 | 현재 | 개선 후 | 예상 효과 |
|------|------|---------|----------|
| DB N+1 쿼리 | 개별 쿼리 | JOIN 프리페치 | API -50% |
| Radix 트리쉐이킹 | 172KB | ~100KB | 번들 -30% |
| 테이블 가상화 | 없음 | virtualization | 대량 데이터 지원 |

---

## 5. 테스트 우선순위

### 단위 테스트 필요 모듈

| 우선순위 | 모듈 | 이유 |
|----------|------|------|
| 1 | `enhanced-matcher.ts` | 핵심 매칭 로직 |
| 2 | `narajangto-api.ts` | 외부 API 연동 |
| 3 | `bid-repository.ts` | 데이터 레이어 |
| 4 | `prompt-guard.ts` | 보안 로직 |
| 5 | `crawl-scheduler.ts` | 스케줄링 로직 |

### E2E 테스트 확장

```
현재: 46개 (Desktop 23 + Mobile 23)
목표: 80개 이상

추가 필요:
- 대시보드 CRUD 플로우
- AI 함수 실행 플로우
- 알림 설정 플로우
```

---

## 6. 다음 단계 체크리스트

### 이번 주 (D-Day)

- [ ] Dashboard API 연결 완료
- [ ] 스프레드시트 필터 UI 완성
- [ ] 기본 알림 발송 구현
- [ ] 프로덕션 배포 테스트

### 다음 주 (D+7)

- [ ] Inngest 크롤링 스케줄러 완성
- [ ] 카카오 알림톡 연동
- [ ] AI_SUMMARY 캐싱 구현
- [ ] E2E 테스트 60개 달성

### 2주 후 (D+14)

- [ ] AI_EXTRACT 구현
- [ ] SAM.gov 클라이언트 추가
- [ ] 성능 최적화 (DB N+1)
- [ ] Lighthouse 80점 이상

---

## 7. 기술 부채

| 항목 | 심각도 | 해결 방안 |
|------|--------|----------|
| any 타입 사용 | 중간 | unknown + 타입가드 |
| 하드코딩 샘플 데이터 | 낮음 | DB 시드 데이터 |
| console.log 남용 | 낮음 | 로깅 라이브러리 적용 |
| 에러 처리 불균일 | 중간 | 공통 에러 핸들러 |

---

*Generated by Claude Code with 7-Agent Parallel Analysis*
